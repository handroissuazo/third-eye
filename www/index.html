<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <title>Third Eye</title>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#home">Third Eye</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
            <li><a href="#overview">Overview</a></li>
            <li><a href="#how">How it Works</a></li>
            <li><a href="#setup">How to Setup</a></li>
            <li><a href="#run">How to Run</a></li>
            <li><a href="#references">References</a></li>
        </ul>
    </div>
</nav>
<section id="home" class="container-fluid">
    <div class="row">
        <div class="col-md-12 text-center">
            <h1>Third Eye</h1>
            <iframe width="560" height="315" src="https://www.youtube.com/embed/t9QOoHGou1E?autoplay=1" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>
</section>
<section id="overview" class="container-fluid">
    <div class="row">
        <div class="col-md-6 text-center center-children">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/_6ZkgYHZXOQ" frameborder="0" allowfullscreen></iframe>
            <p>Project Overview</p>
        </div>
        <div class="col-md-6 text-center center-children">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/cqFqwxRNAok" frameborder="0" allowfullscreen></iframe>
            <p>Technical Overview</p>
        </div>
    </div>
</section>
<section id="how" class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h3>How it Works</h3>
        </div>

        <div class="col-md-4">
            <h4>3D Rendering</h4>
            <ul>
                <li>
                    <b>Server</b>
                    <p>
                        Our central server is multithreaded to host multiple video renders simultaneously. Each thread takes footage downloaded from the previous phase and undergoes a few steps to procedurally generate 3D renders from the footage. The details are as follows
                    </p>
                </li>
                <li>
                    <b>FFMPEG</b>
                    <p>
                        We utilize this command line tool within our central server to generate photos from our video capture.

                    </p>
                </li>
                <li>
                    <b>Scale-Invariant Feature Transform (SIFT/PBA)</b>
                    <p>
                        We first run our photos through a sift algorithm to detect local features in our images. This analysis determines depth, scale, and orientation based on the relational position between the local features or points between images, thus creating a vector matrix for each point's’ movement from one picture to the next.
                    </p>
                    <p>
                        The results of this filtering, named the sparse reconstruction, serve as the starting points for the following analytical algorithms. 
                    </p>
                </li>
                <li>
                    <b>Clustering Views for Multi-view Stereo (CMVS/PVMS)</b>
                    <p>
                        This algorithm attempts to construct a three dimensional image based on the vector and positional information generated by the SIFT algorithm. It takes sparse reconstruction and estimates the orientation of each point on a three dimensional plane using the relational movement data.
                    </p>
                    <p>
                        The results of this analysis is an actual point cloud, named the dense reconstruction, which can be viewed in most CAD softwares
                    </p>
                </li>
            </ul>
        </div>
        <div class="col-md-4">
            <h4>Technical</h4>
            <ul>
                <li>
                    <b>DJI Phantom 3</b>
                    <p>
                        This drone supports point of interest features and hosts an FTP server on a self-generated hotspot to wirelessly access the files. We interface with the drone through a mobile phone application named DJI Go. Through this application we can utilize the point of interest features and control the drone in flight.
                    </p>
                </li>
                <li>
                    <b>Linux Machine</b>
                    <p>
                        We also use a laptop capable of connecting to wireless networks. The software was also built with the linux operating system in mind. Our software should ultimately be portable enough to transfer and use on any other linux machine. 
                    </p>
                </li>
                <li>
                    <b>Ipad &amp; Hologram Pyramid</b>
                    <p>
                        We use an Ipad and a acrylic pyramid to represent the our 3D renders as a hologram to more accurately represent our objects in three dimensional space. 
                    </p>
                </li>
            </ul>
            <h4>Network Communication</h4>
            <p>
                We developed a central server application that could monitor an FTP server hosted on the drone controller. This central server monitors for file usage and size by acting as a watchdog for any file changes within the drone. Once video footage is completed, the central server automatically downloads the footage and initiates the 3D rendering.
            </p>
        </div>
        <div class="col-md-4">
            <h4>Caveats</h4>
            <ul>
                <li>
                    <b>Hardware Limitations</b>
                    <p>
                        We require at least 30 seconds of smooth dynamic camera footage of an object to create an accurate representation. 
                    </p>
                </li>
                <li>
                    <b>Legal Limitations</b>
                    <p>
                        When flying  a drone, according to FAA guidelines, must be a considerable and safe distance from people and objects. This restriction only allows us to capture outdoor footage with the drone.
                    </p>
                </li>
                <li>
                    <b>Software Limitations</b>
                    <p>
                        The algorithms and analysis are quite slow. We must leave 30 to 45 minute post render times for our captures.
                    </p>
                </li>
            </ul>
        </div>
    </div>
</section>
<section id="setup" class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h3>How to Setup</h3>
        </div>
        <div class="col-md-6">
            <h4>The Hardware</h4>
            <ul>
                <li>
                    <b>Drone Controler</b>
                    <p>
                        Ensure the switches on the top corners of the controller are in the middle and bottom positions respectively.
                    </p>
                </li>
                <li>
                    <b>Turn On Devices</b>
                    <p>
                        You can turn on the controller by flipping the switch on the front of the controller and can turn on the drone by TAPPING AND THEN HOLDING the power button on the battery pack.
                    </p>
                </li>
                <li>
                    <b>Connect Devices</b>
                    <p>
                        Enter the drone’s wifi with your mobile device and open the DJI Go application. 
                    </p>
                    <p>
                        Let the drone warm up, set near object of interest, and you are ready to fly.
                    </p>
                </li>
                <li>
                    <b>Hologram Viewer</b>
                    <p>
                        Go to one of our pre-rendered 3D images hosted on <a href="https://www.youtube.com/watch?v=CC65FuF6MCc">youtube</a>
                    </p>
                    <p>
                        Place the IPAD in the holobox face up.
                    </p>
                    <p>
                        Place the light cover and acrylic pyramid in the center of the 4 images of the video. 
                    </p>
                    <p>
                        Look through the viewing hole for 3D effect!
                    </p>
                </li>
            </ul>
            <h4>The Software</h4>
            <p>
                The project depends on a quite a bit of software and can all be found on our <a href=" https://github.com/handroissuazo/third-eye">git repository</a>. There are two options available to you when building the code. You can build the from the required software from its source code or use our pre-built portable binaries which work across all Debian/Ubuntu builds. 
            </p>
            <p>
                <b>Using the prebuilt binaries (Recommended Option)</b>
            </p>
            <ol>
                <li>
                    Extract the vsfm-bin-stripped.tar.gz directory into the HOME directory of your linux path.
                </li>
                <li>
                    Enter the <code>~/vsfm</code> directory. 
                </li>
                <li>
                    Run the ./system-reqs-install.sh script (you will need root permissions)
                    <ul>
                        <li>
                            If you cannot run the script be sure to set the file permissions with the following command: <code>chown 777 system-reqs-install.sh</code>
                        </li>
                    </ul>
                </li>
                <li>
                    Then run the command <code>sudo ./auto-vsfm-config.sh</code>
                    <ul>
                        <li>
                            Again, if you cannot run the script be sure to set the file permissions with the following command: <code>chown 777 auto-vsfm-config.sh</code>
                        </li>
                    </ul>
                </li>
            </ol>
        </div>
        <div class="col-md-6">
            <b>Building from Source</b>
                <ol>
                    <li>
                        Copy the vsfm folder into  the HOME directory of your linux path.
                    </li>
                    <li>
                        Enter the <code>~/vsfm</code> directory. 
                    </li>
                    <li>
                        Run the <code>./system-reqs-install.sh</code> script (you will need root permissions)
                        <ul>
                            <li>
                                If you cannot run the script be sure to set the file permissions with the following command: <code>chown 777 system-reqs-install.sh</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Run “make“ in the ~/vsfm/vsfm directory.
                        <ul>
                            <li>
                                <code>cd ~/vsfm/vsfm; make</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Run “make” in the ~/vsfm/SiftGPU directory.
                        <ul>
                            <li>
                                <code>cd ~/vsfm/SiftGPU; make</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Copy the siftGPU binary into the VisualSFM bin directory
                        <ul>
                            <li>
                                <code>cp bin/libsiftgpu.so ../vsfm/bin</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Run “make” in the ~/vsfm/pba directory.
                        <ul>
                            <li>
                                <code>cd ~/vsfm/pba; make</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Copy the pba binary into the VisualSFM bin directory
                        <ul>
                            <li>
                                <code>cp bin/libpba_no_gpu.so ../vsfm/bin/libpba.so</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                         Go into the pmvs program directory
                        <ul>
                            <li>
                                <code>cd ~/vsfm/pmvs-2/program/main</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Build the PMVS program with the following commands
                        <ul>
                            <li>
                                <code>cd pmvs-2/program/main/;</code><br />
                                <code>cp mylapack.o mylapack.o.backup;</code><br />
                                <code>make clean;</code><br />
                                <code>cp mylapack.o.backup mylapack.o;</code><br />
                                <code>make depend;</code><br />
                                <code>make;</code><br />
                                <code>cp mylapack.o ~/vsfm/cmvs/program/main/</code><br />
                            </li>
                            <li>
                                NOTE: DO NOT Copy the pmvs2 binary into the visualSFM directory YET
                            </li>
                        </ul>
                    </li>
                    <li>
                        Go into the graclus1.2 directory and build the program
                        <ul>
                            <li>
                                <code>cd ~/vsfm/graclus1.2; make</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Go to the CMVS source directory
                        <ul>
                            <li>
                                <code>cd ~/vsfm/cmvs/program/main;</code>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Edit the CMVS Makefile
                        <ul>
                            <li>
                                Replace all instances of <code>/home/&lt;yourusername&gt;/vsfm/</code> with the path to your vsfm installation.
                            </li>
                            <li>
                                Save and close.
                            </li>
                        </ul>
                    </li>
                    <li>
                        Build the cmvs program
                        <p>
                            <code>make;</code>
                        </p>
                    </li>
                    <li>
                        Copy the cmvs, pmvs, and genOption programs into the vsfm bin directory. <br/>
                        <code>cp cmvs../../../vsfm/bin/</code><br/>
                        <code>cp pmvs2 ../../../vsfm/bin/</code><br/>
                        <code>cp genOption../../../vsfm/bin/</code><br/>
                    </li>
                    <li>
                        Then run the command <code>sudo ./auto-vsfm-config.sh</code>
                    </li>
                </ol>
        </div>
    </div>
</section>
<section id="run" class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h3>How to Run</h3>
        </div>
        <div class="col-md-offset-2 col-md-4">
            <h4>The Hardware</h4>
            <p>After setting up the drone follow these steps to capture point of interest footage of your object.</p>
            <ol>
                <li>
                    Allow the drone to take-off using it’s take-off feature. 
                </li>
                <li>
                    Ensure your camera setting is on video.
                </li>
                <li>
                    Select the point of interest feature in the advanced flight modes menu.
                </li>
                <li>
                    Follow the required steps on the screen to configure your flight path.
                </li>
                <li>
                    Once your drone begins to rotate around your configured flight path hit record on your video.
                    <ul>
                        <li>
                            NOTE: Ensure central server is running at this time to automatically generate 3D renders. 
                        </li>
                    </ul>
                </li>
            </ol>
        </div>
        <div class="col-md-4">
            <h4>The Software</h4>
            <p>
                Before starting, ensure your host machine is on the network provided by the DJI drone and have run one of the previous setups. You can have a video already on the drone, or be in the process of recording one. Our software handles both cases.     
            </p>
            <ol>
                <li>
                    In your main project directory start your virtual python3.5 environment.
                    <p>
                        <code>source py3env/bin/activate</code>
                    </p>
                </li>
                <li>
                    Run the central server
                    <p>
                        <code>python CentralServer.py</code>
                    </p>
                </li>
            </ol>
            
        </div>
    </div>  
</section>
<section id="references" class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <h3>References</h3>
            <ul>
                <li>
                    <a href="http://www.di.ens.fr/cmvs/">Furukawa, Yasutaka. "CMVS." CMVS. University of Washington, 17 July 2010. Web. 30 Sept. 2016.</a>
                </li>
                <li>
                    <a href="http://www.di.ens.fr/pmvs/">Furuwaka, Yasutaka, and Jean Ponce. "PMVS2." PMVS2. University of Illinois, 13 July 2010. Web. 15 Sept. 2016. </a>
                </li>
                <li>
                    <a href="http://grail.cs.washington.edu/projects/mcba">Wu, Changchang, Sameer Agarwal, Brian Curless, and Steven M. Seitz. "Multicore Bundle Adjustment." Multicore Bundle Adjustment. University of Washington, 2011. Web. 20 Sept. 2016. </>.</a>
                </li>
                <li>
                    <a href="http://ccwu.me/vsfm/vsfm.pdf">Wu, Changchang. "Towards Linear-time Incremental Structure from Motion." VisualSFM : A Visual Structure from Motion System. University of Washington, n.d. Web. 16 Sept. 2016.</a>
                </li>
                <li>
                    <a href="http://www.python.org">Python Software Foundation. Python Language Reference, version 3.5.</a>
                </li>
                <li>
                    <a href="http://incompetech.com">Inspired Kevin MacLeod. Licensed under Creative Commons: By Attribution 3.0 License. http://creativecommons.org/licenses/by/3.0/</a>
                </li>
                <li>
                    <a href="http://incompetech.com">Pyro Flow Kevin MacLeod. Licensed under Creative Commons: By Attribution 3.0 License. http://creativecommons.org/licenses/by/3.0/</a>
                </li>
            </ul>
        </div>
    </div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
</body>
</html>